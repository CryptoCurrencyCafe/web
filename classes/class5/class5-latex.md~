draftTitle: Class 5: Distributed Consensus
Date: 2015-01-28

<!--
   <div class="phighlight">
   [PDF version for printing](|filename|./class5.pdf)
   </div>
-->

## Schedule 

   <div class="todo">
[Project 1](|filename|../../pages/projects/project1/project1.md) is due **Friday, 30 January** (11:59pm).

**Upcoming office hours:**  Thursday 4-5pm (Dave, Rice 507); Friday (Nick, noon-2pm in Hackcville).
   </div>

<!--
<center> 
<iframe src="//www.slideshare.net/slideshow/embed_code/43918186" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br>
<div class="caption">Note: due to a bug in
slideshare's updated player, ink markings no longer appear in the
viewer.  <br>If you download the slides, they are present though.
Hopefully, the player will be fixed someday. </div>
</center>
-->

## Cryptographic Hash Functions

A _cryptographic hash function_, <span class="math">_H_(_x_)</span>, must satisfy these two properties:

- **one-way** (preimage resistance): given <span class="math">_h_= _H_(_x_)</span> it is hard to find preimage <span class="math">_x_</span>.
- **strong collision-resistance**: hard to find any pair <span class="math">_x_</span> and <span class="math">_y_</span> where <span class="math">_H_(_x_) = _H_(_y_)</span>

If we use SHA-256 for <span class="math">_H_</span>, how many 258-bit
messages would be expected to hash to a given value <span
class="math">_x_</span>?
<div class="gap">

</div>

## Signing Message Digests

**Sign:** Sign(<span class="math">m</span>) = <span class="math">_E_(_KR_<sub>A</sub>, _H_(_m_))</span>

Given <span class="math">_KU_<sub>A</sub></span>, <span
class="math">_m_</span>, and <span class="math">_S_</span>, how does Bob
verify that <span class="math">_S_</span> is a valid signature from
Alice for <span class="math">_m_</span>?

<div class="gap">
</div>

A bitcoin address for public key _K_ is RIPEMD160(SHA256(_K_) where both
RIPEMD160 and SHA256 are cryptographic hash functions.  

Is this more or less secure than just using _K_?  
<div class="gap">
</div>

Suppose someone finds a way to find collisions for RIPEMD160.  How
serious of a risk would this pose to bitcoin?  

<div class="gap">

</div>

Suppose someone finds a way to find preimages for RIPEMD160.  How
serious of a risk would this pose to bitcoin?
<div class="gap">

</div>

## Untraceable Electronic Cash

David Chaum, Amos Fiat, and Moni Naor.  [_Untraceable Electronic
Cash_](|filename|./ecash.pdf).  CRYPTO 1988.

**Simple RSA Signatures**  
Public Key = (_e_, _n_)
Private Key = _d_

Identity: _M_<sup>_de_</sup> = _M_ mod _n_

Sign(_m_) = _m_<sup>_d_</sup> mod _n_

**Blind Signatures**
Alice picks random _k_ in [1, _n_)  
_t_ = _mk_<sup>_e_</sup> mod _n_  
Sends _t_ to signer.

Signer returns _t_<sup>_d_</sup>

_t_<sup>_d_</sup> = (_mk_<sup>_e_</sup> mod _n_)<sup>_d_</sup> mod _n_  
&nbsp;&nbsp;&nbsp; = _m_<sup>_d_</sup>_k_<sup>_ed_</sup> mod _n_
&nbsp;&nbsp;&nbsp; = _m_<sup>_d_</sup>_k_ mod _n_

Dividing by _k_ gives Sign(_m_) = _m_<sup>_d_</sup> mod _n_.


What should a signer know before signing a random-looking string?
<div class="gap">

</div>

**Cut-and-Choose**  


## Double Spending



[High Trust Bank](https://www.fdic.gov/bank/individual/failed/hightrust.html)
[Failed Banks](https://www.fdic.gov/bank/individual/failed/banklist.html)

[Before Bitcoin: The Rise and Fall of DigiCash](http://globalcryptonews.com/before-bitcoin-the-rise-and-fall-of-digicash/)

> _By all accounts Chaum was a charismatic leader with an interesting management style, but he refused to compromise his artistic vision in any area against the best advice of his employees. He was suspicious of everyone and 'paranoid' with a habit of suddenly changing his mind without warning. At one time, Microsoft had offered DigiCash $180 million to allow them to preinstall Ecash software on Windows computers and the deal was on the verge of completion, but Chaum suddenly decided that his product was worth more and the deal collapsed. If the deal had gone through, cryptocurrency would now be as ubiquitous as Internet Explorer._


## Distributed Consensus

Leslie Lamport, Robert Shostak, and Marshall Pease. [_The Byzantine
Generals
Problem_](http://research.microsoft.com/en-us/um/people/lamport/pubs/byz.pdf). 1982.

[$2M worth of pizza](http://www.forbes.com/sites/ericmack/2013/12/23/the-bitcoin-pizza-purchase-thats-worth-7-million-today/)


**Two Generals Problem.**
